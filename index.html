<!DOCTYPE html>
<html>
<head>
  <title>Free TradingView Chart</title>
  <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
  <style>
    #chart {
      width: 100%;
      height: 500px;
    }
    select {
      margin: 10px;
    }
  </style>
</head>
<body>
  <h2>RELIANCE Chart Preview</h2>
  <select id="timeframe">
    <option value="1m">1 Minute</option>
    <option value="5m">5 Minute</option>
    <option value="15m">15 Minute</option>
    <option value="1h">1 Hour</option>
    <option value="1d" selected>1 Day</option>
    <option value="1wk">1 Week</option>
  </select>

  <div id="chart"></div>

  <script>
    let chart = LightweightCharts.createChart(document.getElementById('chart'), {
      width: window.innerWidth * 0.95,
      height: 500,
      layout: {
        backgroundColor: '#ffffff',
        textColor: '#000',
      },
    });

    let candleSeries = chart.addCandlestickSeries();

    async function fetchData(interval = '1d') {
      const url = `https://query1.finance.yahoo.com/v8/finance/chart/RELIANCE.NS?interval=${interval}&range=5d`;
      const res = await fetch(url);
      const data = await res.json();
      const candles = [];

      const timestamps = data.chart.result[0].timestamp;
      const ohlc = data.chart.result[0].indicators.quote[0];

      for (let i = 0; i < timestamps.length; i++) {
        candles.push({
          time: timestamps[i],
          open: ohlc.open[i],
          high: ohlc.high[i],
          low: ohlc.low[i],
          close: ohlc.close[i],
        });
      }

      candleSeries.setData(candles);
    }

    document.getElementById('timeframe').addEventListener('change', (e) => {
      fetchData(e.target.value);
    });

    fetchData();
  </script>
</body>
</html>
